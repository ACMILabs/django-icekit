<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Placeholders &#8212; ICEkit 0.9 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="placeholders">
<span id="placeholders"></span><h1>Placeholders<a class="headerlink" href="#placeholders" title="Permalink to this headline">¶</a></h1>
<p>When an editor edits rich content in ICEkit, she adds <strong>Content Plugins</strong>
into one or more <strong>Placeholders</strong>.</p>
<p>Placeholders are specified in the html template that is associated with the
rich content model. At render time, each <code class="docutils literal"><span class="pre">render_placeholder</span></code> template tag
renders all of the content items as they were added by the editor.</p>
<div class="section" id="allowing-direct-access-to-slot-contents-with-placeholderdescriptor">
<span id="allowing-direct-access-to-slot-contents-with-placeholderdescriptor"></span><h2>Allowing direct access to slot contents with <code class="docutils literal"><span class="pre">PlaceholderDescriptor</span></code><a class="headerlink" href="#allowing-direct-access-to-slot-contents-with-placeholderdescriptor" title="Permalink to this headline">¶</a></h2>
<p>There are several times where it is useful to gain direct access to a slots
contents without wanting to render them. The is especially useful in
templates to detect if there are any slot contents so that the rendered slot
output can be wrapped in appropriate tags.</p>
<div class="section" id="adding-placeholderdescriptor-to-a-model-class">
<span id="adding-placeholderdescriptor-to-a-model-class"></span><h3>Adding <code class="docutils literal"><span class="pre">PlaceholderDescriptor</span></code> to a model class<a class="headerlink" href="#adding-placeholderdescriptor-to-a-model-class" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">PlaceholderDescriptor</span></code> assumes that <code class="docutils literal"><span class="pre">Placeholder</span></code> objects are created for
the appropriate model class.</p>
<p>To add the descriptor directly to the model class create a property on the
class and create an instance of <code class="docutils literal"><span class="pre">PlaceholderDescriptor</span></code>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">icekit.plugins.descriptors</span> <span class="k">import</span> <span class="n">PlaceholderDescriptor</span>


<span class="k">class</span> <span class="nc">TestFluentPage</span><span class="p">(</span><span class="n">AbstractFluentPage</span><span class="p">):</span>
    <span class="n">slots</span> <span class="o">=</span> <span class="n">PlaceholderDescriptor</span><span class="p">()</span>
</pre></div>
</div>
<p>For external libraries a monkey patching utility is provided. Calling the
monkey patch function with the model class is all that is required.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fluent_pages.pagetypes.fluentpage.models</span> <span class="k">import</span> <span class="n">FluentPage</span>
<span class="kn">from</span> <span class="nn">icekit.plugins.descriptors</span> <span class="k">import</span> <span class="n">contribute_to_class</span>


<span class="n">contribute_to_class</span><span class="p">(</span><span class="n">FluentPage</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="using-placeholderdescriptor">
<span id="using-placeholderdescriptor"></span><h3>Using <code class="docutils literal"><span class="pre">PlaceholderDescriptor</span></code><a class="headerlink" href="#using-placeholderdescriptor" title="Permalink to this headline">¶</a></h3>
<p>When accessed via an instance of a model class with <code class="docutils literal"><span class="pre">PlaceholderDescriptor</span></code>
enabled a <code class="docutils literal"><span class="pre">PlaceholderAccess</span></code> object is created with all of the slot names
available as attributes. If we have an instance with contents in a
<code class="docutils literal"><span class="pre">Placeholder</span></code> named <code class="docutils literal"><span class="pre">main</span></code> we would access the contents by accessing the
property such as <code class="docutils literal"><span class="pre">instance.slots.main</span></code>. This will return an ordered
<code class="docutils literal"><span class="pre">QuerySet</span></code> of content items for that slot.</p>
<p>If not corresponding slot exists on the referenced property an
<code class="docutils literal"><span class="pre">AttributeError</span></code> will be thrown. This is swallowed in templates. Fluent
contents will only create a <code class="docutils literal"><span class="pre">Placeholder</span></code> object when data is to be added to
the relevant slot so the <code class="docutils literal"><span class="pre">AttributeError</span></code> may be thrown before the initial data is
created.</p>
<p>You may also perform the lookup in a dictionary style manner such as
<code class="docutils literal"><span class="pre">instance.slots['main']</span></code> and if the slot referenced does not exist a
<code class="docutils literal"><span class="pre">KeyError</span></code> will be raised.</p>
</div>
<div class="section" id="template-tags">
<span id="template-tags"></span><h3>Template tags<a class="headerlink" href="#template-tags" title="Permalink to this headline">¶</a></h3>
<p>As slot names are arbitrary strings they may use characters which wont allow
access to attributes on descriptors in templates e.g. the &#8216;-&#8216; character.</p>
<p>To help with this problem some template tags have been created.</p>
<p>To use any of the following tags you will need to load <code class="docutils literal"><span class="pre">icekit_tags</span></code> into
your template. To do this at the top of your template do the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">load</span> <span class="n">icekit_tags</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<div class="section" id="template-tag-get-slot-contents">
<span id="template-tag-get-slot-contents"></span><h4>Template tag: <code class="docutils literal"><span class="pre">get_slot_contents</span></code><a class="headerlink" href="#template-tag-get-slot-contents" title="Permalink to this headline">¶</a></h4>
<p>The tag <code class="docutils literal"><span class="pre">get_slot_contents</span></code> may be used as a filter, or an assignment tag.</p>
<p>In each of the below examples we will assume that we have an object named
<code class="docutils literal"><span class="pre">page</span></code> with a <code class="docutils literal"><span class="pre">PlaceholderDescriptor</span></code> on it named <code class="docutils literal"><span class="pre">slots</span></code> and a placeholder
with a slot named <code class="docutils literal"><span class="pre">test-main</span></code>.</p>
<p>To use this tag as a filter:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{{</span> <span class="n">page</span><span class="o">.</span><span class="n">slots</span><span class="o">|</span><span class="n">get_slot_contents</span><span class="p">:</span><span class="s1">&#39;test-main&#39;</span> <span class="p">}}</span>
</pre></div>
</div>
<p>This will output the list of contents directly into your template (which is
only useful for debugging).</p>
<p>Each of the these items can be iterated and worked on as required e.g.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">page</span><span class="o">.</span><span class="n">slots</span><span class="o">|</span><span class="n">get_slot_contents</span><span class="p">:</span><span class="s1">&#39;test-main&#39;</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{{</span> <span class="n">item</span> <span class="p">}}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>The assignment tag will allow assignment to a variable name for use later in
your template. If we wanted to assign the returned list into a variable
named <code class="docutils literal"><span class="pre">testname</span></code> we can do the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="n">get_slot_contents</span> <span class="n">page</span><span class="o">.</span><span class="n">slots</span> <span class="s1">&#39;test-main&#39;</span> <span class="k">as</span> <span class="n">testname</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>This will then let us work on the contents later in the template e.g.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">testname</span> <span class="o">%</span><span class="p">}</span>
    <span class="p">{{</span> <span class="n">item</span> <span class="p">}}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
</pre></div>
</div>
<p>If a placeholder does not exist <code class="docutils literal"><span class="pre">None</span></code> will be returned.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Placeholders</a><ul>
<li><a class="reference internal" href="#allowing-direct-access-to-slot-contents-with-placeholderdescriptor">Allowing direct access to slot contents with <code class="docutils literal"><span class="pre">PlaceholderDescriptor</span></code></a><ul>
<li><a class="reference internal" href="#adding-placeholderdescriptor-to-a-model-class">Adding <code class="docutils literal"><span class="pre">PlaceholderDescriptor</span></code> to a model class</a></li>
<li><a class="reference internal" href="#using-placeholderdescriptor">Using <code class="docutils literal"><span class="pre">PlaceholderDescriptor</span></code></a></li>
<li><a class="reference internal" href="#template-tags">Template tags</a><ul>
<li><a class="reference internal" href="#template-tag-get-slot-contents">Template tag: <code class="docutils literal"><span class="pre">get_slot_contents</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/architecture/content/_placeholders.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, the Interaction Consortium.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../../_sources/architecture/content/_placeholders.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>